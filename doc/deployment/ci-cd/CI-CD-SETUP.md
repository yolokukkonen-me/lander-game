# üöÄ CI/CD –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Lander Game

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (PowerShell)](#–±—ã—Å—Ç—Ä—ã–π-–¥–µ–ø–ª–æ–π)
2. [Git + GitHub](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-git)
3. [GitHub Actions (–∞–≤—Ç–æ–¥–µ–ø–ª–æ–π)](#github-actions)
4. [–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–æ—Ç–∫–∞—Ç-–∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## üî• –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ `deploy.ps1`

**–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±** - –∑–∞–ø—É—Å—Ç–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π PowerShell —Å–∫—Ä–∏–ø—Ç:

```powershell
cd C:\OpenServer\domains\yolo-ide-isogenic-keys-dev.ru
.\deploy.ps1
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. üì¶ –ö–æ–ø–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. üîÑ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä
4. üíæ –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
5. üöÄ –ü—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
6. ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
7. üß™ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2-3 –º–∏–Ω—É—Ç—ã

---

## üìÅ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```powershell
cd C:\OpenServer\domains\yolo-ide-isogenic-keys-dev.ru
git init
git add .
git commit -m "Initial commit: Lander game with virtual keyboard"
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://github.com/new
2. –ù–∞–∑–≤–∞–Ω–∏–µ: `lander-game`
3. –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å: **Private** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
4. **–ù–ï** —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ README, .gitignore (—É–∂–µ –µ—Å—Ç—å)

### 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GitHub

```powershell
git remote add origin https://github.com/–í–ê–®_–Æ–ó–ï–†–ù–ï–ô–ú/lander-game.git
git branch -M main
git push -u origin main
```

---

## ‚öôÔ∏è GitHub Actions (–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π)

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
**Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí New repository secret**

–°–æ–∑–¥–∞–π—Ç–µ 4 —Å–µ–∫—Ä–µ—Ç–∞:

#### `SSH_PRIVATE_KEY`
```powershell
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
Get-Content "$env:USERPROFILE\.ssh\yc"
```
–í—Å—Ç–∞–≤—å—Ç–µ **–≤–µ—Å—å** –≤—ã–≤–æ–¥ (–≤–∫–ª—é—á–∞—è `-----BEGIN ... KEY-----`)

#### `SSH_KNOWN_HOSTS`
```powershell
ssh-keyscan 51.250.30.92
```
–í—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å—å –≤—ã–≤–æ–¥

#### `SERVER_IP`
```
51.250.30.92
```

#### `SERVER_USER`
```
ubuntu
```

### 2. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ **–∫–∞–∂–¥—ã–π push –≤ main** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç GitHub Actions
2. –ö–æ–ø–∏—Ä—É–µ—Ç –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–≥—Ä—É
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### 3. –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```powershell
# 1. –í–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
# 2. –ö–æ–º–º–∏—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# 3. –ü—É—à–∏—Ç–µ –Ω–∞ GitHub
git push

# 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–µ–ø–ª–æ–π!
# –°–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å: https://github.com/–í–ê–®_–Æ–ó–ï–†/lander-game/actions
```

---

## üîÑ –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é

–ö–∞–∂–¥—ã–π –¥–µ–ø–ª–æ–π —Å–æ–∑–¥–∞–µ—Ç backup. –î–ª—è –æ—Ç–∫–∞—Ç–∞:

```powershell
ssh -i "$env:USERPROFILE\.ssh\yc" ubuntu@51.250.30.92

# –°–º–æ—Ç—Ä–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã
ls -la /opt/ | grep lander.backup

# –í—ã–±–∏—Ä–∞–µ–º –Ω—É–∂–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, lander.backup.20251101_220000)
sudo systemctl stop lander
sudo rm -rf /opt/lander
sudo mv /opt/lander.backup.20251101_220000 /opt/lander
sudo systemctl start lander
```

### –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ Git

```powershell
# –°–º–æ—Ç—Ä–∏–º –∏—Å—Ç–æ—Ä–∏—é
git log --oneline

# –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è –Ω–∞ –Ω—É–∂–Ω—ã–π –∫–æ–º–º–∏—Ç
git revert HEAD
git push

# –ò–ª–∏ –∂–µ—Å—Ç–∫–∏–π –æ—Ç–∫–∞—Ç (—É–¥–∞–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é!)
git reset --hard COMMIT_HASH
git push --force
```

---

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```powershell
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
cd C:\OpenServer\domains\yolo-ide-isogenic-keys-dev.ru\server
node ige.js -g ../examples/50-lander_virtual_keyboard

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
start http://localhost:3000
```

### –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
ssh -i "$env:USERPROFILE\.ssh\yc" ubuntu@51.250.30.92 "sudo systemctl status lander"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
ssh -i "$env:USERPROFILE\.ssh\yc" ubuntu@51.250.30.92 "sudo systemctl restart lander"

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
ssh -i "$env:USERPROFILE\.ssh\yc" ubuntu@51.250.30.92 "sudo journalctl -u lander -f"

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
# Ctrl+Shift+R (Chrome/Firefox)
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –¥–µ–ø–ª–æ—è

| –ú–µ—Ç–æ–¥ | –°–∫–æ—Ä–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------|----------|-----------|---------------|--------------|
| `deploy.ps1` | ‚ö°‚ö°‚ö° | üü¢ –õ–µ–≥–∫–æ | ‚ùå –†—É—á–Ω–æ–π | **–õ—É—á—à–∏–π –¥–ª—è —Å—Ç–∞—Ä—Ç–∞** |
| Git + —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π | ‚ö°‚ö° | üü° –°—Ä–µ–¥–Ω–µ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è |
| GitHub Actions | ‚ö° | üî¥ –°–ª–æ–∂–Ω–æ | ‚úÖ –ü–æ–ª–Ω–∞—è | **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞** |

---

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Permission denied"
```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ SSH –∫–ª—é—á
icacls "$env:USERPROFILE\.ssh\yc" /inheritance:r /grant:r "$env:USERNAME:R"
```

### –û—à–∏–±–∫–∞ "Connection refused"
```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Security Group –≤ Yandex.Cloud
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç –ø–æ—Ä—Ç 22 (SSH)
```

### –ò–≥—Ä–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
ssh -i "$env:USERPROFILE\.ssh\yc" ubuntu@51.250.30.92 "sudo journalctl -u lander -n 50"
```

### –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```
–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à: Ctrl+Shift+Delete
–ñ–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞: Ctrl+Shift+R
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞

```powershell
# 1. –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥
# 2. –ó–∞–¥–µ–ø–ª–æ–∏–ª–∏
.\deploy.ps1
# 3. –ì–æ—Ç–æ–≤–æ! (~2 –º–∏–Ω—É—Ç—ã)
```

### –ü—Ä–∏–º–µ—Ä 2: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è —á–µ—Ä–µ–∑ Git

```powershell
# 1. –°–æ–∑–¥–∞–µ–º –≤–µ—Ç–∫—É
git checkout -b feature/new-controls

# 2. –í–Ω–æ—Å–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ–º–º–∏—Ç–∏–º
git add .
git commit -m "Add new control scheme"

# 3. –ú–µ—Ä–∂–∏–º –≤ main
git checkout main
git merge feature/new-controls

# 4. –ü—É—à–∏–º (–∞–≤—Ç–æ–¥–µ–ø–ª–æ–π!)
git push
```

### –ü—Ä–∏–º–µ—Ä 3: –î–µ–ø–ª–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏

```powershell
# 1. –°–º–æ—Ç—Ä–∏–º —Ç–µ–≥–∏
git tag

# 2. –î–µ–ø–ª–æ–∏–º –≤–µ—Ä—Å–∏—é v1.2.0
git checkout v1.2.0
.\deploy.ps1
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow

**–î–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
1. –ü–∏—à–µ—Ç–µ –∫–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ `.\deploy.ps1`
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –Ω–∞ http://51.250.30.92/

**–î–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Actions
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ feature branches
3. Pull Request ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ GitHub Actions

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `sudo journalctl -u lander -f`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `sudo systemctl status lander`
3. –û—Ç–∫–∞—Ç–∏—Ç–µ—Å—å –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π backup

**URL –∏–≥—Ä—ã:** http://51.250.30.92/examples/50-lander_virtual_keyboard/

