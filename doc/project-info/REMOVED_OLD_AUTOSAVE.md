# üóëÔ∏è –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏

## üìù –ß—Ç–æ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ

### 1. –ú–µ—Ç–æ–¥ `_saveLogData()` –≤ `Player.js`

**–°—Ç–∞—Ä—ã–π –∫–æ–¥ (—É–¥–∞–ª–µ–Ω):**
```javascript
_saveLogData: function () {
    if (!ige.isServer || this._logData.length === 0) return;
    
    var fs = require('fs');
    var filename = 'player_training_' + Date.now() + '.json';
    var filepath = './logs/' + filename;
    
    fs.writeFileSync(filepath, JSON.stringify(this._logData, null, 2));
    console.log('[TRAINING] Saved ' + this._logData.length + ' log entries');
    
    this._logData = [];
}
```

**–ß—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª:** –§–∞–π–ª—ã `player_training_<timestamp>.json`

**–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–ª—Å—è:** –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –∏–≥—Ä–æ–∫–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

---

### 2. –í—ã–∑–æ–≤ –≤ `ServerNetworkEvents.js`

**–°—Ç–∞—Ä—ã–π –∫–æ–¥ (—É–¥–∞–ª–µ–Ω):**
```javascript
_onPlayerDisconnect: function (clientId) {
    if (ige.server.players[clientId]) {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–≥–∏ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –∏–≥—Ä–æ–∫–∞
        if (ige.server.players[clientId]._playerLogging && 
            ige.server.players[clientId]._logData.length > 0) {
            ige.server.players[clientId]._saveLogData();  // ‚Üê –£–î–ê–õ–ï–ù–û
        }
        
        // Remove the player from the game
        ige.server.players[clientId].destroy();
        // ...
    }
}
```

---

## ‚ùì –ü–æ—á–µ–º—É —É–¥–∞–ª–µ–Ω–æ?

### –ü—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã:

1. **‚ùå –ú—É—Å–æ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - –°–æ—Ö—Ä–∞–Ω—è–ª—Å—è —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
   - –≠—Ç–æ –æ–±—ã—á–Ω–æ **–Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π/–Ω–µ—É–¥–∞—á–Ω—ã–π —Å–µ–≥–º–µ–Ω—Ç** (–º—É—Å–æ—Ä –¥–ª—è ML)

2. **‚ùå –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å v3.0**
   - –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞: `success_segment_*.json` (—Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ)
   - –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞: `player_training_*.json` (–ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ)
   - –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã ‚Üí –ø—É—Ç–∞–Ω–∏—Ü–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ

3. **‚ùå –ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å**
   - –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ v3.0 —É–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ–≥–º–µ–Ω—Ç—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ
   - –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É—Å–ø–µ—à–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã **–Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è**
   - –¢–µ–∫—É—â–∏–π –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –±—É—Ñ–µ—Ä **–Ω–µ –Ω—É–∂–µ–Ω**

4. **‚ùå –ë–µ–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**
   - –§–∞–π–ª—ã `player_training_*` –Ω–µ —Å–æ–¥–µ—Ä–∂–∞–ª–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
   - –ù–µ—Ç `deliveryEvent`, –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ score
   - –ù–∏–∑–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è ML –æ–±—É—á–µ–Ω–∏—è

---

## ‚úÖ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

### –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –∏–≥—Ä–æ–∫–∞:

**–î–æ:**
```
–û—Ç–∫–ª—é—á–µ–Ω–∏–µ ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä ‚Üí player_training_*.json
             (–¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –º—É—Å–æ—Ä)
```

**–¢–µ–ø–µ—Ä—å:**
```
–û—Ç–∫–ª—é—á–µ–Ω–∏–µ ‚Üí –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
             (—É—Å–ø–µ—à–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã –£–ñ–ï —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–∞—Ö)
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

‚úÖ **–¢–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - —Ñ–∞–π–ª—ã `success_segment_*.json` —Å —É—Å–ø–µ—à–Ω—ã–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∞–º–∏
‚úÖ **–ù–µ—Ç –º—É—Å–æ—Ä–∞** - –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ –∑–∞–≥—Ä—è–∑–Ω—è—é—Ç –¥–∞—Ç–∞—Å–µ—Ç
‚úÖ **–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** - –≤—Å–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
‚úÖ **–§–∏–Ω–∞–ª—å–Ω—ã–µ –∫–∞–¥—Ä—ã** - –∫–∞–∂–¥—ã–π —Å–µ–≥–º–µ–Ω—Ç –ø–æ–º–µ—á–µ–Ω `deliveryEvent`

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç `player_training_*.json`:
```json
[
  {
    "x": 400,
    "y": 300,
    "fuel": 85,
    "carryingOrb": true,
    ...
  },
  ... (–º–∞—Å—Å–∏–≤ –∫–∞–¥—Ä–æ–≤, –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–µ)
]
```

### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç `success_segment_*.json`:
```json
{
  "metadata": {
    "segmentType": "delivery_segment",
    "scoreEarned": 250,
    "totalFrames": 146,
    "successful": true
  },
  "frames": [
    ... (–∫–∞–¥—Ä—ã),
    {
      // –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–∞–¥—Ä:
      "deliveryEvent": true,
      "scoreEarned": 250,
      "carryingOrb": false,
      "landed": true
    }
  ]
}
```

---

## üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã `player_training_*.json`:

### Windows:
```bash
cd logs
del player_training_*.json
```

### Linux/Mac:
```bash
cd logs
rm player_training_*.json
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é —É–¥–∞–ª–∏—Ç–µ –∏—Ö –∏–∑ –ø–∞–ø–∫–∏ `logs/`

---

## üìÖ –î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è

2024-11-04 (v3.0)

---

## üéØ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è **—á–∏—â–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ**:
- üìÅ –¢–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã
- üéØ –¢–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è ML
- üìä –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- üöÄ –ü—Ä–æ—â–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–±—É—á–∞—Ç—å –º–æ–¥–µ–ª–∏

